# Battery Power Indicator GNOME Extension

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
Battery Power Indicator ‚Äî —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è GNOME Shell, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â—É—é –º–æ—â–Ω–æ—Å—Ç—å –±–∞—Ç–∞—Ä–µ–∏ (–≤ –≤–∞—Ç—Ç–∞—Ö) –∏ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –≤ –ø–∞–Ω–µ–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –û–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–æ—É—Ç–±—É–∫–æ–≤, –∂–µ–ª–∞—é—â–∏—Ö –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ `/sys/class/power_supply/BAT0/` –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Ö –≤ –≤–µ—Ä—Ö–Ω–µ–º –±–∞—Ä–µ GNOME. –í–æ—Ç –ø—Ä–∏–º–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:

- **–ü—Ä–∏ –∑–∞—Ä—è–¥–∫–µ**: `‚ö° 40.0W (–∑–∞—Ä—è–¥–∫–∞)` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–æ—â–Ω–æ—Å—Ç—å, –ø–æ–¥–∞–≤–∞–µ–º—É—é –Ω–∞ –±–∞—Ç–∞—Ä–µ—é, –∫–æ–≥–¥–∞ –æ–Ω–∞ –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è.
- **–ü—Ä–∏ —Ä–∞–∑—Ä—è–¥–µ**: `üîã 10.0W (—Ä–∞–∑—Ä—è–¥ ~7—á 21–º)` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ä–µ–¥–Ω—é—é –º–æ—â–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä—è–¥–∞ –∏ –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–π —ç–Ω–µ—Ä–≥–∏–∏ (`energy_now`) –∏ —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è (`avgPower`).
- **–ü—Ä–∏ –ø–æ–ª–Ω–æ–º –∑–∞—Ä—è–¥–µ**: `üîå 0.0W (–ø–æ–ª–Ω—ã–π –∑–∞—Ä—è–¥)` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –±–∞—Ç–∞—Ä–µ—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—Ä—è–∂–µ–Ω–∞ –∏ –ø–∏—Ç–∞–Ω–∏–µ –∏–¥—ë—Ç –æ—Ç –∞–¥–∞–ø—Ç–µ—Ä–∞.
- **–ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –±–µ–∑ –∑–∞—Ä—è–¥–∫–∏**: `üîå 0.0W (–ø–æ–¥–∫–ª—é—á–µ–Ω–æ)` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∞–¥–∞–ø—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á—ë–Ω, –Ω–æ –±–∞—Ç–∞—Ä–µ—è –Ω–µ –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è.
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö**: `üîã N/A` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.

–ó–Ω–∞—á–µ–Ω–∏—è –º–æ—â–Ω–æ—Å—Ç–∏ —É—Å—Ä–µ–¥–Ω—è—é—Ç—Å—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã —Å–≥–ª–∞–¥–∏—Ç—å —Å–∫–∞—á–∫–∏. –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `energy_now / avgPower`, –≥–¥–µ `energy_now` ‚Äî —Ç–µ–∫—É—â–∞—è —ç–Ω–µ—Ä–≥–∏—è –±–∞—Ç–∞—Ä–µ–∏ –≤ –≤–∞—Ç—Ç-—á–∞—Å–∞—Ö, –∞ `avgPower` ‚Äî —Å—Ä–µ–¥–Ω—è—è –º–æ—â–Ω–æ—Å—Ç—å –≤ –≤–∞—Ç—Ç–∞—Ö.

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–∏—Ç–∞–Ω–∏–∏
–ï—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `energy_now`, `power_now`, `status`) –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ `charge_now`, `charge_full`, `energy_full`, `current_now`, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É:
  ```bash
  for file in status power_now voltage_now current_now energy_now energy_full energy_full_design charge_now charge_full charge_full_design capacity capacity_level; do
      echo -n "/sys/class/power_supply/BAT0/$file: "
      cat /sys/class/power_supply/BAT0/$file 2>/dev/null || echo "–ù–µ—Ç —Ç–∞–∫–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–ª–∏ –∫–∞—Ç–∞–ª–æ–≥–∞"
  done
  ```

- –ï—Å–ª–∏ –∞–¥–∞–ø—Ç–µ—Ä –ø–∏—Ç–∞–Ω–∏—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è (–Ω–µ—Ç AC/online –∏–ª–∏ AC/power_now), —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –Ω–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è power_now (< 1 –í—Ç) –∏ —Å—Ç–∞—Ç—É—Å Discharging, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞.
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∫–∞–∂–µ—Ç üîã N/A. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –≤ /sys/class/power_supply/ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:
```bash
sudo dnf update
sudo dnf reinstall gnome-shell
```
## –î–ª—è –∫–∞–∫–∏—Ö –≤–µ—Ä—Å–∏–π Linux
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Fedora Linux 41 (Workstation Edition) —Å GNOME 47, —Ä–∞–±–æ—Ç–∞—é—â–∏–º –ø–æ–¥ Wayland –∏ —è–¥—Ä–æ–º Linux 6.11.11-300.fc41.x86_64.
- –û–Ω–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–∏—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö Linux —Å GNOME 47 –∏ –≤—ã—à–µ, –Ω–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∞—Ü–∏–∏, –µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ /sys/class/power_supply/ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è.
–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è GJS: 1.78 (–æ–±—ã—á–Ω–æ –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å GNOME 47).
## –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
#### 1. –°–∫–∞—á–∞–π—Ç–µ –∏–ª–∏ —Å–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
- –°–∫–∞—á–∞–π—Ç–µ –∞—Ä—Ö–∏–≤ —Å GitHub –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ git:
```bash
git clone https://github.com/–≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/battery-power-indicator.git
cd battery-power-indicator
```
#### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
 - –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
```bash
mkdir -p ~/.local/share/gnome-shell/extensions/battery-power@custom
```
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã extension.js –∏ metadata.json –≤ —ç—Ç—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
cp extension.js metadata.json ~/.local/share/gnome-shell/extensions/battery-power@custom/
```
#### –í–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
–ü–µ—Ä–µ–Ω–æ—Å
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
gnome-extensions disable battery-power@custom 2>/dev/null || true
gnome-extensions enable battery-power@custom
```
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ GNOME Shell:
    - –ù–∞–∂–º–∏—Ç–µ Alt + F2, –≤–≤–µ–¥–∏—Ç–µ r –∏ –Ω–∞–∂–º–∏—Ç–µ Enter.
- –ò–ª–∏ –≤—ã–π–¥–∏—Ç–µ –∏–∑ —Å–µ–∞–Ω—Å–∞ –∏ –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ:
```bash
gnome-session-quit --logout
```
#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ—è–≤–∏–ª—Å—è –≤ –≤–µ—Ä—Ö–Ω–µ–º –±–∞—Ä–µ GNOME. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```bash
gnome-extensions info battery-power@custom
journalctl --user -b | grep -i "battery-power"
```
# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- GNOME Shell 47 –∏–ª–∏ –≤—ã—à–µ.
- GJS (JavaScript –¥–ª—è GNOME) –≤–µ—Ä—Å–∏–∏ 1.78 –∏–ª–∏ –Ω–æ–≤–µ–µ.
- –î–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º –≤ /sys/class/power_supply/ (–æ–±—ã—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
# –õ–∏—Ü–µ–Ω–∑–∏—è
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT License]